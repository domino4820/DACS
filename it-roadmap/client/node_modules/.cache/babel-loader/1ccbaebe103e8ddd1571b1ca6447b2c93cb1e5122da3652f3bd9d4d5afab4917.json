{"ast":null,"code":"/**\r\n * Xử lý lỗi ResizeObserver loop trong ReactFlow\r\n * Lỗi này không ảnh hưởng đến chức năng hoạt động của ứng dụng\r\n * nhưng gây ra cảnh báo khó chịu trong console\r\n */\n\nexport function applyResizeObserverFix() {\n  if (typeof window === \"undefined\") {\n    return; // Không áp dụng trên server-side rendering\n  }\n\n  // Ghi đè phương thức error của console để lọc các cảnh báo ResizeObserver\n  const originalConsoleError = console.error;\n  console.error = (...args) => {\n    var _args$, _args$$message, _args$$message$includ, _args$2, _args$2$toString, _args$2$toString$call, _args$2$toString$call2;\n    // Kiểm tra các dạng thông báo lỗi khác nhau\n    if (args[0] && (typeof args[0] === \"string\" && args[0].includes(\"ResizeObserver loop\") || (_args$ = args[0]) !== null && _args$ !== void 0 && (_args$$message = _args$.message) !== null && _args$$message !== void 0 && (_args$$message$includ = _args$$message.includes) !== null && _args$$message$includ !== void 0 && _args$$message$includ.call(_args$$message, \"ResizeObserver loop\") || (_args$2 = args[0]) !== null && _args$2 !== void 0 && (_args$2$toString = _args$2.toString) !== null && _args$2$toString !== void 0 && (_args$2$toString$call = (_args$2$toString$call2 = _args$2$toString.call(_args$2)).includes) !== null && _args$2$toString$call !== void 0 && _args$2$toString$call.call(_args$2$toString$call2, \"ResizeObserver loop\"))) {\n      // Bỏ qua lỗi ResizeObserver loop\n      return;\n    }\n    // Gọi phương thức gốc cho các lỗi khác\n    originalConsoleError.apply(console, args);\n  };\n\n  // Hỗ trợ đặc biệt cho ReactFlow khi nó sử dụng ResizeObserver\n  if (window.ResizeObserver) {\n    // Lưu triển khai ResizeObserver gốc\n    const OriginalResizeObserver = window.ResizeObserver;\n\n    // Ghi đè với phiên bản xử lý lỗi tốt hơn\n    window.ResizeObserver = class EnhancedResizeObserver extends OriginalResizeObserver {\n      constructor(callback) {\n        // Bọc callback với xử lý lỗi\n        const wrappedCallback = (entries, observer) => {\n          // Debounce resize events to reduce frequency\n          if (this._timeout) {\n            clearTimeout(this._timeout);\n          }\n          this._timeout = setTimeout(() => {\n            try {\n              callback(entries, observer);\n            } catch (error) {\n              if (!String(error).includes(\"ResizeObserver loop\")) {\n                throw error; // Chỉ bắt lỗi ResizeObserver\n              }\n              // Otherwise silently ignore the error\n            }\n          }, 20); // Small delay to batch resize events\n        };\n        super(wrappedCallback);\n        this._timeout = null;\n      }\n      disconnect() {\n        if (this._timeout) {\n          clearTimeout(this._timeout);\n          this._timeout = null;\n        }\n        super.disconnect();\n      }\n\n      // Override observe to add additional error handling\n      observe(target, options) {\n        try {\n          return super.observe(target, options);\n        } catch (error) {\n          console.warn(\"ResizeObserver error caught:\", error);\n          // Continue execution, don't break the app\n        }\n      }\n    };\n  }\n\n  // Also handle error events globally\n  window.addEventListener(\"error\", event => {\n    if (event.message && event.message.includes(\"ResizeObserver loop\")) {\n      event.stopImmediatePropagation();\n      event.preventDefault();\n      return true;\n    }\n  }, true);\n  console.log(\"✅ Enhanced ResizeObserver fix applied\");\n}\nexport default applyResizeObserverFix;","map":{"version":3,"names":["applyResizeObserverFix","window","originalConsoleError","console","error","args","_args$","_args$$message","_args$$message$includ","_args$2","_args$2$toString","_args$2$toString$call","_args$2$toString$call2","includes","message","call","toString","apply","ResizeObserver","OriginalResizeObserver","EnhancedResizeObserver","constructor","callback","wrappedCallback","entries","observer","_timeout","clearTimeout","setTimeout","String","disconnect","observe","target","options","warn","addEventListener","event","stopImmediatePropagation","preventDefault","log"],"sources":["D:/CyberPath/it-roadmap/client/src/utils/resizeObserverFix.js"],"sourcesContent":["/**\r\n * Xử lý lỗi ResizeObserver loop trong ReactFlow\r\n * Lỗi này không ảnh hưởng đến chức năng hoạt động của ứng dụng\r\n * nhưng gây ra cảnh báo khó chịu trong console\r\n */\r\n\r\nexport function applyResizeObserverFix() {\r\n  if (typeof window === \"undefined\") {\r\n    return; // Không áp dụng trên server-side rendering\r\n  }\r\n\r\n  // Ghi đè phương thức error của console để lọc các cảnh báo ResizeObserver\r\n  const originalConsoleError = console.error;\r\n  console.error = (...args) => {\r\n    // Kiểm tra các dạng thông báo lỗi khác nhau\r\n    if (\r\n      args[0] &&\r\n      ((typeof args[0] === \"string\" &&\r\n        args[0].includes(\"ResizeObserver loop\")) ||\r\n        args[0]?.message?.includes?.(\"ResizeObserver loop\") ||\r\n        args[0]?.toString?.().includes?.(\"ResizeObserver loop\"))\r\n    ) {\r\n      // Bỏ qua lỗi ResizeObserver loop\r\n      return;\r\n    }\r\n    // Gọi phương thức gốc cho các lỗi khác\r\n    originalConsoleError.apply(console, args);\r\n  };\r\n\r\n  // Hỗ trợ đặc biệt cho ReactFlow khi nó sử dụng ResizeObserver\r\n  if (window.ResizeObserver) {\r\n    // Lưu triển khai ResizeObserver gốc\r\n    const OriginalResizeObserver = window.ResizeObserver;\r\n\r\n    // Ghi đè với phiên bản xử lý lỗi tốt hơn\r\n    window.ResizeObserver = class EnhancedResizeObserver extends (\r\n      OriginalResizeObserver\r\n    ) {\r\n      constructor(callback) {\r\n        // Bọc callback với xử lý lỗi\r\n        const wrappedCallback = (entries, observer) => {\r\n          // Debounce resize events to reduce frequency\r\n          if (this._timeout) {\r\n            clearTimeout(this._timeout);\r\n          }\r\n\r\n          this._timeout = setTimeout(() => {\r\n            try {\r\n              callback(entries, observer);\r\n            } catch (error) {\r\n              if (!String(error).includes(\"ResizeObserver loop\")) {\r\n                throw error; // Chỉ bắt lỗi ResizeObserver\r\n              }\r\n              // Otherwise silently ignore the error\r\n            }\r\n          }, 20); // Small delay to batch resize events\r\n        };\r\n\r\n        super(wrappedCallback);\r\n        this._timeout = null;\r\n      }\r\n\r\n      disconnect() {\r\n        if (this._timeout) {\r\n          clearTimeout(this._timeout);\r\n          this._timeout = null;\r\n        }\r\n        super.disconnect();\r\n      }\r\n\r\n      // Override observe to add additional error handling\r\n      observe(target, options) {\r\n        try {\r\n          return super.observe(target, options);\r\n        } catch (error) {\r\n          console.warn(\"ResizeObserver error caught:\", error);\r\n          // Continue execution, don't break the app\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Also handle error events globally\r\n  window.addEventListener(\r\n    \"error\",\r\n    (event) => {\r\n      if (event.message && event.message.includes(\"ResizeObserver loop\")) {\r\n        event.stopImmediatePropagation();\r\n        event.preventDefault();\r\n        return true;\r\n      }\r\n    },\r\n    true\r\n  );\r\n\r\n  console.log(\"✅ Enhanced ResizeObserver fix applied\");\r\n}\r\n\r\nexport default applyResizeObserverFix;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}